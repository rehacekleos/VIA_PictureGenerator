"use strict";(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[885],{885:(Te,b,c)=>{c.r(b),c.d(b,{MainModule:()=>ye});var m=c(6895),g=c(8612),e=c(8256);const w=function(){return["/auth/register"]},y=function(){return["gallery"]};let I=(()=>{class n{constructor(){this.images=[944,1011,984].map(t=>`https://picsum.photos/id/${t}/900/500`)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-dashboard"]],decls:61,vars:6,consts:[["xmlns","http://www.w3.org/1999/html",1,"px-4","pt-5","my-5","text-center","border-bottom"],[1,"display-4","fw-bold"],[1,"col-lg-6","mx-auto"],[1,"lead","mb-4"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center","mb-5"],["type","button",1,"btn","btn-primary","btn-lg","px-4","me-sm-3",3,"routerLink"],["type","button",1,"btn","btn-outline-secondary","btn-lg","px-4",3,"routerLink"],[1,"overflow-hidden",2,"max-height","30vh"],[1,"container","px-5"],["src","/assets/ladingPage.png","alt","Example image","width","700","height","500","loading","lazy",1,"img-fluid","border","rounded-3","shadow-lg","mb-4"],[1,"pb-5"],[1,"container"],[1,"row"],[1,"col-lg-4"],[1,"fw-normal"],[1,"btn","btn-secondary",3,"routerLink"],[1,"fw-bolder"],[1,"featurette-divider"],[1,"col-md-7"],[1,"fw-normal","lh-1"],[1,"text-muted"],[1,"lead"],[1,"fw-bold"],["href","https://openai.com/","target","_blank"],["href","https://openai.com/dall-e-2/","target","_blank",1,"btn","btn-secondary"],[1,"col-md-5"],[1,"row","ms-0"],["width","300","height","300","src","/assets/dallE.jpeg",1,"bd-placeholder-img","bd-placeholder-img-lg","img-fluid","mx-auto"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Image generator"),e.qZA(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5,"A simple application with which you can generate simple images based on a description. This application was created in the VIA course at FEL CTU in Prague."),e.qZA(),e.TgZ(6,"div",4)(7,"button",5),e._uU(8,"Register"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"View Gallery"),e.qZA()()(),e.TgZ(11,"div",7)(12,"div",8),e._UZ(13,"img",9),e.qZA()()(),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"h2",14),e._uU(19,"Simple generator"),e.qZA(),e.TgZ(20,"p"),e._uU(21,"Image generation is done using a simple form builder. The server then processes your request and returns an image that you can save."),e.qZA()(),e.TgZ(22,"div",13)(23,"h2",14),e._uU(24,"Gallery"),e.qZA(),e.TgZ(25,"p"),e._uU(26,"The gallery contains all images created by all users. In addition, logged-in users can rate other images."),e.qZA(),e.TgZ(27,"p")(28,"a",15),e._uU(29,"View Gallery"),e.qZA()()(),e.TgZ(30,"div",13)(31,"h2",14),e._uU(32,"Using"),e.qZA(),e.TgZ(33,"p"),e._uU(34,"To generate images you need to register. Then each user can create "),e.TgZ(35,"span",16),e._uU(36,"up to 10 images."),e.qZA()()()()(),e._UZ(37,"hr",17),e.TgZ(38,"div",11)(39,"div",12)(40,"div",18)(41,"h2",19),e._uU(42,"Based on "),e.TgZ(43,"span",20),e._uU(44,"AI"),e.qZA()(),e.TgZ(45,"p",21),e._uU(46,"Image generation is based on AI. This is possible with the "),e.TgZ(47,"span",22),e._uU(48,"DALL\xb7E 2"),e.qZA(),e._uU(49," tool from "),e.TgZ(50,"a",23),e._uU(51,"OpenAI"),e.qZA(),e._uU(52,". DALL\xb7E 2 can create original, realistic images and art from a text description. It can combine concepts, attributes, and styles."),e.qZA(),e.TgZ(53,"p")(54,"a",24),e._uU(55,"More informations \xbb"),e.qZA()()(),e.TgZ(56,"div",25)(57,"div",26),e._uU(58,"DALL\xb7E 2"),e.qZA(),e._UZ(59,"img",27),e.qZA()()(),e._UZ(60,"hr",17),e.qZA()),2&t&&(e.xp6(7),e.Q6J("routerLink",e.DdM(3,w)),e.xp6(2),e.Q6J("routerLink",e.DdM(4,y)),e.xp6(19),e.Q6J("routerLink",e.DdM(5,y)))},dependencies:[g.rH,g.yS]}),n})();var f=c(6518),p=c(9489),d=c(5861),U=c(4987),M=c(5427),l=c(433);function q(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function J(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Email is invalid"),e.qZA())}function N(n,r){if(1&n&&(e.TgZ(0,"div",11),e.YNc(1,q,2,0,"div",12),e.YNc(2,J,2,0,"div",12),e.qZA()),2&n){e.oxw();const t=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.email)}}function k(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function G(n,r){if(1&n&&(e.TgZ(0,"div",11),e.YNc(1,k,2,0,"div",12),e.qZA()),2&n){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}let S=(()=>{class n{constructor(t,i){this.authService=t,this.toaster=i,this.loginAuth=new U.$0,this.logging=!1}ngOnInit(){}login(t){var i=this;return(0,d.Z)(function*(){if(i.logging=!0,t.valid)try{yield i.authService.logIn(i.loginAuth)}catch(o){o.error.message&&i.toaster.showToastMessage(o.error.message,5e3,"danger")}i.logging=!1})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.e),e.Y36(M.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:17,consts:[[1,"px-4","py-3",3,"ngSubmit"],["loginForm","ngForm"],["for","email"],["type","email","id","email","email","","required","","name","email","autocomplete","username",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","required","","name","password","id","password","autocomplete","current-password",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"w-100","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(o);const s=e.MAs(1);return e.KtG(i.login(s))}),e.TgZ(2,"div")(3,"label",2),e._uU(4,"Email address"),e.qZA(),e.TgZ(5,"input",3,4),e.NdJ("ngModelChange",function(s){return i.loginAuth.email=s}),e.qZA(),e.YNc(7,N,3,2,"div",5),e.qZA(),e.TgZ(8,"div")(9,"label",6),e._uU(10,"Password"),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(s){return i.loginAuth.password=s}),e.qZA(),e.YNc(13,G,2,1,"div",5),e.qZA(),e.TgZ(14,"div",9)(15,"button",10),e._uU(16,"Sign in"),e.qZA()()()}if(2&t){const o=e.MAs(1),a=e.MAs(6),s=e.MAs(12);e.xp6(2),e.ekj("mb-25px",!(a.invalid&&(a.dirty||a.touched))),e.xp6(3),e.ekj("is-invalid",a.invalid&&(a.dirty||a.touched))("is-valid",a.valid&&(a.dirty||a.touched)),e.Q6J("ngModel",i.loginAuth.email),e.xp6(2),e.Q6J("ngIf",a.errors&&(a.dirty||a.touched)),e.xp6(1),e.ekj("mb-25px",!(s.invalid&&(s.dirty||s.touched))),e.xp6(3),e.ekj("is-invalid",s.invalid&&(s.dirty||s.touched))("is-valid",s.valid&&(s.dirty||s.touched)),e.Q6J("ngModel",i.loginAuth.password),e.xp6(2),e.Q6J("ngIf",s.errors&&(s.dirty||s.touched)),e.xp6(2),e.Q6J("disabled",o.form.invalid||i.logging)}},dependencies:[m.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.on,l.On,l.F]}),n})();const F=function(){return["my-gallery"]};function L(n,r){1&n&&(e.TgZ(0,"li",6)(1,"a",7),e._UZ(2,"i",18),e._uU(3,"My images"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,F)))}const Q=function(){return["generate"]};function Y(n,r){1&n&&(e.TgZ(0,"li",6)(1,"a",7),e._UZ(2,"i",19),e._uU(3,"Generate"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,Q)))}function O(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.user.nickname)}}function P(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-login")(2,"div",20),e.TgZ(3,"button",21),e._uU(4,"New around here? "),e.TgZ(5,"span",22),e._uU(6,"Sign up"),e.qZA()()())}function H(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"button",24)(2,"span",22),e._UZ(3,"i",25),e._uU(4," Profile"),e.qZA()(),e.TgZ(5,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.logOut())}),e.TgZ(6,"span",22),e._UZ(7,"i",27),e._uU(8," Log Out"),e.qZA()()()}}const E=function(){return[""]},D=function(){return["gallery"]};let j=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.$user.subscribe(t=>{this.user=t})}logOut(){this.authService.logOut()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-header"]],decls:25,vars:9,consts:[[1,"navbar","fixed-top","bg-primary","navbar-expand-sm"],[1,"container-fluid","justify-content-between","text-white"],[1,"col-3"],[1,"navbar-brand","text-white","text-uppercase"],[1,"col","text-center"],[1,"navbar-nav","justify-content-center","mb-lg-0"],[1,"nav-item"],[1,"nav-link","link-light",3,"routerLink"],[1,"bi","bi-house-fill","me-1"],[1,"bi","bi-images","me-1"],["class","nav-item",4,"ngIf"],[1,"col-3","text-end"],["ngbDropdown","","placement","bottom-right","display","dynamic"],["ngbDropdownToggle","",1,"pointer"],[4,"ngIf"],[1,"ms-1","bi","bi-person-fill"],["ngbDropdownMenu","",1,"bg-light","shadow"],["class","text-center",4,"ngIf"],[1,"bi","bi-person-square","me-1"],[1,"bi","bi-palette-fill","me-1"],[1,"dropdown-divider","mt-1"],["type","button","routerLink","/auth/register","ngbDropdownItem",""],[1,"fw-bold"],[1,"text-center"],["type","button","routerLink","profile","ngbDropdownItem",""],[1,"bi","bi-person-fill"],["type","button","ngbDropdownItem","",3,"click"],[1,"bi","bi-box-arrow-right"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),e._uU(4,"Image generator"),e.qZA()(),e.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e._UZ(9,"i",8),e._uU(10,"Home"),e.qZA()(),e.TgZ(11,"li",6)(12,"a",7),e._UZ(13,"i",9),e._uU(14,"Gallery"),e.qZA()(),e.YNc(15,L,4,2,"li",10),e.YNc(16,Y,4,2,"li",10),e.qZA()(),e.TgZ(17,"div",11)(18,"div",12)(19,"div",13),e.YNc(20,O,2,1,"span",14),e._UZ(21,"i",15),e.qZA(),e.TgZ(22,"div",16),e.YNc(23,P,7,0,"div",14),e.YNc(24,H,9,0,"div",17),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("routerLink",e.DdM(7,E)),e.xp6(4),e.Q6J("routerLink",e.DdM(8,D)),e.xp6(3),e.Q6J("ngIf",i.user),e.xp6(1),e.Q6J("ngIf",i.user),e.xp6(4),e.Q6J("ngIf",i.user),e.xp6(3),e.Q6J("ngIf",!i.user),e.xp6(1),e.Q6J("ngIf",i.user))},dependencies:[m.O5,g.rH,g.yS,p.jt,p.iD,p.Vi,p.TH,p.M2,S]}),n})(),z=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-footer"]],decls:9,vars:0,consts:[[1,"footer","fixed-bottom","bg-primary"],[1,"container","align-content-between","text-white"],[1,"row"],[1,"col"],[1,"col","text-center"],[1,"col","text-end"]],template:function(t,i){1&t&&(e.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," FEL CTU in Prague "),e.qZA(),e.TgZ(5,"div",4),e._uU(6," A4M33VIA 2022/2023 "),e.qZA(),e.TgZ(7,"div",5),e._uU(8," \xa9 \u0158eh\xe1\u010dek Leo\u0161 "),e.qZA()()()())}}),n})(),R=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-main"]],decls:3,vars:0,consts:[[1,"mb-4"]],template:function(t,i){1&t&&e._UZ(0,"app-header",0)(1,"router-outlet")(2,"app-footer")},dependencies:[g.lC,j,z]}),n})();var u=c(2340),_=c(3905),T=c(529);let B=(()=>{class n{constructor(t){this.http=t}updateUser(t){var i=this;return(0,d.Z)(function*(){const o=u.N.userApi;return yield(0,_.z)(i.http.put(o,t))})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var K=c(1481);let h=(()=>{class n{constructor(t,i){this.http=t,this.sanitizer=i}getImages(t){return t?this.getMyImages():this.getAllImages()}getAllImages(){var t=this;return(0,d.Z)(function*(){const i=u.N.imageApi+"/all",o=yield(0,_.z)(t.http.get(i));for(let a of o)a.image=t.sanitizer.bypassSecurityTrustUrl("data:image/jpg;base64, "+a.image);return o})()}getMyImages(){var t=this;return(0,d.Z)(function*(){const i=u.N.imageApi,o=yield(0,_.z)(t.http.get(i));for(let a of o)a.image=t.sanitizer.bypassSecurityTrustUrl("data:image/jpg;base64, "+a.image);return o})()}generateImage(t){var i=this;return(0,d.Z)(function*(){const o=u.N.imageApi+"/generate",a=yield(0,_.z)(i.http.post(o,t));return a.image=i.sanitizer.bypassSecurityTrustUrl("data:image/jpg;base64, "+a.image),a})()}addRating(t,i){var o=this;return(0,d.Z)(function*(){const a=u.N.imageApi+`/rating/${t}`;yield(0,_.z)(o.http.post(a,{rating:i}))})()}getImagesCount(){var t=this;return(0,d.Z)(function*(){const i=u.N.imageApi+"/count";return(yield(0,_.z)(t.http.get(i))).count})()}deleteImage(t){var i=this;return(0,d.Z)(function*(){const o=u.N.imageApi+`/${t}`;yield(0,_.z)(i.http.delete(o))})()}generateName(){var t=this;return(0,d.Z)(function*(){const i=u.N.imageApi+"/randomName";return(yield(0,_.z)(t.http.get(i))).name})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN),e.LFG(K.H7))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $(n,r){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.nickname)}}function X(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",20),e._uU(2,"Nickname"),e.qZA(),e.TgZ(3,"input",21,22),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updatedUser.nickname=o)}),e.qZA()()}if(2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(3),e.ekj("is-invalid",t.invalid&&(t.dirty||t.touched))("is-valid",t.valid&&(t.dirty||t.touched)),e.Q6J("ngModel",i.updatedUser.nickname)}}function V(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Password must be at least 4 characters "),e.qZA())}function W(n,r){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,V,2,0,"div",9),e.qZA()),2&n){e.oxw();const t=e.MAs(5);e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function ee(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Confirm Password does not match "),e.qZA())}function te(n,r){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,ee,2,0,"div",9),e.qZA()),2&n){e.oxw();const t=e.MAs(11);e.xp6(1),e.Q6J("ngIf",t.errors.matching)}}function ne(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div")(2,"label",23),e._uU(3,"Password"),e.qZA(),e.TgZ(4,"input",24,25),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updatedUser.password=o)}),e.qZA(),e.YNc(6,W,2,1,"div",26),e.qZA(),e.TgZ(7,"div")(8,"label",27),e._uU(9,"Confirm Password"),e.qZA(),e.TgZ(10,"input",28,29),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.rePassword=o)}),e.qZA(),e.YNc(12,te,2,1,"div",26),e.qZA()()}if(2&n){const t=e.MAs(5),i=e.MAs(11),o=e.oxw(2);e.xp6(4),e.ekj("is-invalid",t.invalid&&(t.dirty||t.touched))("is-valid",t.valid&&(t.dirty||t.touched)),e.Q6J("ngModel",o.updatedUser.password),e.xp6(2),e.Q6J("ngIf",t.errors&&(t.dirty||t.touched)),e.xp6(4),e.ekj("is-invalid",i.invalid&&(i.dirty||i.touched))("is-valid",i.valid&&(i.dirty||i.touched)),e.Q6J("ngModel",o.rePassword),e.xp6(2),e.Q6J("ngIf",i.errors)}}function ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.editProfile())}),e._UZ(1,"i",32),e._uU(2," Edit "),e.qZA()}}function oe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cancelEdit())}),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",35),e._uU(4,"Edit"),e.qZA()()}if(2&n){e.oxw();const t=e.MAs(5);e.xp6(3),e.Q6J("disabled",t.form.invalid)}}function re(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",36)(2,"ngb-progressbar",37),e._uU(3),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("value",10*t.imagesCount),e.xp6(1),e.hij("",t.imagesCount," of 10")}}function ae(n,r){1&n&&(e.TgZ(0,"p",17),e._uU(1,"Loading..."),e.qZA())}function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmEdit())}),e.TgZ(6,"div",7)(7,"div"),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div"),e.YNc(10,$,2,1,"h5",9),e.YNc(11,X,5,5,"div",9),e.qZA(),e.YNc(12,ne,13,12,"div",9),e.YNc(13,ie,3,0,"div",10),e.YNc(14,oe,5,1,"div",11),e.qZA(),e.TgZ(15,"div",12)(16,"div",13)(17,"h6"),e._uU(18,"Information"),e.qZA(),e._UZ(19,"hr",14),e.TgZ(20,"div",15)(21,"div",16)(22,"h6"),e._uU(23,"Email"),e.qZA(),e.TgZ(24,"p",17),e._uU(25),e.qZA()()(),e.TgZ(26,"h6"),e._uU(27,"Statistics"),e.qZA(),e._UZ(28,"hr",14),e.TgZ(29,"div",15)(30,"h6"),e._uU(31,"Images"),e.qZA(),e.YNc(32,re,4,2,"ng-container",18),e.YNc(33,ae,2,0,"ng-template",null,19,e.W1O),e.qZA()()()()()()()()}if(2&n){const t=e.MAs(34),i=e.oxw();e.xp6(10),e.Q6J("ngIf",!i.edit),e.xp6(1),e.Q6J("ngIf",i.edit),e.xp6(1),e.Q6J("ngIf",i.edit),e.xp6(1),e.Q6J("ngIf",!i.edit),e.xp6(1),e.Q6J("ngIf",i.edit),e.xp6(11),e.Oqu(i.user.email),e.xp6(7),e.Q6J("ngIf",i.imagesCount)("ngIfElse",t)}}let le=(()=>{class n{constructor(t,i,o){this.authService=t,this.userService=i,this.imageService=o,this.edit=!1}ngOnInit(){this.authService.$user.subscribe(t=>{this.user=t}),this.imageService.getImagesCount().then(t=>{this.imagesCount=t})}editProfile(){this.updatedUser={nickname:this.user.nickname,password:""},this.edit=!0,this.backupUser=JSON.parse(JSON.stringify(this.user))}confirmEdit(){var t=this;return(0,d.Z)(function*(){t.edit=!1;const i=yield t.userService.updateUser(t.updatedUser);t.authService.$user.next(i)})()}cancelEdit(){this.edit=!1,this.user=JSON.parse(JSON.stringify(this.backupUser))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.e),e.Y36(B),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:1,vars:1,consts:[["class","container vh-100",4,"ngIf"],[1,"container","vh-100"],[1,"d-flex","justify-content-center","align-items-center","h-100"],[1,"col","col-lg-10","mb-4","mb-lg-0"],[1,"card","mb-3","shadow"],["ngForm","",1,"row","g-0",3,"ngSubmit"],["editForm","ngForm"],[1,"col-md-4","gradient-custom","text-center","px-2",2,"border-top-left-radius",".5rem","border-bottom-left-radius",".5rem"],["src","/assets/avatar.webp","alt","Avatar",1,"img-fluid","my-4",2,"width","80px"],[4,"ngIf"],["class","mt-4 pointer",3,"click",4,"ngIf"],["class","mt-2 mb-2",4,"ngIf"],[1,"col-md-8"],[1,"card-body","p-4"],[1,"mt-0","mb-4"],[1,"row","pt-1"],[1,"col-12","mb-3"],[1,"text-muted"],[4,"ngIf","ngIfElse"],["LoadingCount",""],["for","nickname",1,"form-label"],["type","text","name","nickname","required","","minlength","4","id","nickname",1,"form-control",3,"ngModel","ngModelChange"],["nickname","ngModel"],["for","password",1,"form-label"],["type","password","name","password","minlength","6","id","password",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","repassword",1,"form-label"],["type","password","name","repassword","id","repassword",1,"form-control",3,"ngModel","ngModelChange"],["repassword","ngModel"],[1,"invalid-feedback"],[1,"mt-4","pointer",3,"click"],[1,"bi","bi-pencil-square"],[1,"mt-2","mb-2"],[1,"btn","btn-danger","mx-1",3,"click"],["type","submit",1,"btn","btn-primary","mx-1",3,"disabled"],[1,"col"],[3,"value"]],template:function(t,i){1&t&&e.YNc(0,se,35,8,"div",0),2&t&&e.Q6J("ngIf",i.user)},dependencies:[m.O5,p.Ly,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.On,l.F],styles:[".edit-profile-image[_ngcontent-%COMP%]{opacity:.4!important}.edit-profile-image-icon[_ngcontent-%COMP%]{position:absolute;top:55px;left:120px}"]}),n})(),v=(()=>{class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return!!this.authService.getUser()||(this.router.navigate([""]).then(),!1)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.e),e.LFG(g.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=c(4806);function ce(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"img",9),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw(3);return e.KtG(s.openLightBox(a))}),e.qZA(),e.TgZ(2,"div",10)(3,"span",11),e._uU(4),e.qZA()(),e.TgZ(5,"div",10),e._UZ(6,"i",12),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"div",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(3),x=e.MAs(7);return e.KtG(s.deleteImage(a,x))}),e._UZ(10,"i",14),e._uU(11," Delete"),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(3),e.hij(" ",e.xi3(8,3,t.createdIn,"shortDate"),"")}}function de(n,r){if(1&n&&(e.TgZ(0,"div")(1,"div",6),e.YNc(2,ce,12,6,"div",7),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.images)}}function ge(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"H1",5),e._uU(2,"My Images"),e.qZA(),e.YNc(3,de,3,1,"div",1),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(5);e.xp6(3),e.Q6J("ngIf",t.images)("ngIfElse",i)}}function pe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"img",9),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw(3);return e.KtG(s.openLightBox(a))}),e.qZA(),e.TgZ(2,"div",10)(3,"span",11),e._uU(4),e.qZA()(),e.TgZ(5,"div",10),e._UZ(6,"i",17),e._uU(7),e.qZA(),e.TgZ(8,"ngb-rating",18),e.NdJ("rateChange",function(o){const s=e.CHM(t).$implicit,x=e.oxw(3);return e.KtG(x.setRating(o,s))}),e.qZA()()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(3),e.hij(" ",t.author,""),e.xp6(1),e.Q6J("rate",i.getRating(t))("max",5)("readonly",!i.canRate)}}function me(n,r){if(1&n&&(e.TgZ(0,"div")(1,"div",6),e.YNc(2,pe,9,6,"div",15),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.images)}}function ue(n,r){if(1&n&&(e.TgZ(0,"H1",5),e._uU(1,"Gallery"),e.qZA(),e.YNc(2,me,3,1,"div",1)),2&n){const t=e.oxw(),i=e.MAs(5);e.xp6(2),e.Q6J("ngIf",t.images)("ngIfElse",i)}}function _e(n,r){1&n&&(e.TgZ(0,"div",16)(1,"div",19)(2,"div",20),e._UZ(3,"div",21),e.qZA()()())}function fe(n,r){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,_e,4,0,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.fakeArray)}}function he(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"h4",23),e._uU(2,"Delete Image"),e.qZA(),e.TgZ(3,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",25)(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"div",26)(8,"button",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.close("Cancel click"))}),e._uU(9,"Cancel"),e.qZA(),e.TgZ(10,"button",28),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.close("Save click"))}),e._uU(11,"Save"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.hij("Do you really want to delete image with name: ",t.deletedImageName,"?")}}let A=(()=>{class n{constructor(t,i,o,a,s){this.imageService=t,this.authService=i,this.route=o,this.modalService=a,this._lightbox=s,this.canRate=!0,this.isMyGallery=!1,this.fakeArray=new Array(16),this.images=null,this._album=[]}ngOnInit(){this.authService.$user.subscribe(i=>{this.canRate=null!==this.authService.getUser()}),this.isMyGallery="my-gallery"==this.route.snapshot.routeConfig.path,this.getImages()}getImages(){this.imageService.getImages(this.isMyGallery).then(t=>{this.images=t,this._album=t.map(i=>({src:i.image,caption:i.name}))})}openLightBox(t){this._lightbox.open(this._album,t,{centerVertically:!0,showImageNumberLabel:!0})}getRating(t){const i=t.rating.reduce((o,a)=>o+a,0);return t.currentRate=i/t.rating.length||0,t.currentRate}setRating(t,i){var o=this;return(0,d.Z)(function*(){o.canRate=!1,yield o.imageService.addRating(i.imageId,t),i.rating.push(t),o.getRating(i),o.canRate=null!==o.authService.getUser()})()}deleteImage(t,i){var o=this;this.deletedImageName=t.name,this.modalService.open(i,{ariaLabelledBy:"modal-basic-title"}).result.then(function(){var a=(0,d.Z)(function*(s){yield o.imageService.deleteImage(t.imageId),o.getImages()});return function(s){return a.apply(this,arguments)}}(),a=>{})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h),e.Y36(f.e),e.Y36(g.gz),e.Y36(p.FF),e.Y36(C.ey))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gallery"]],decls:8,vars:2,consts:[[1,"mt-5","pb-5","container","text-center"],[4,"ngIf","ngIfElse"],["Gallery",""],["Loading",""],["content",""],[1,"pt-2"],[1,"row","justify-content-center"],["class","col p-2 flex-grow-0 text-start","style","max-width: 216px;",4,"ngFor","ngForOf"],[1,"col","p-2","flex-grow-0","text-start",2,"max-width","216px"],["height","200","width","200",1,"pointer",3,"src","click"],[1,"row","text-start"],[1,"fw-bold","text-wrap","text-break"],[1,"bi","bi-calendar","w-auto"],[1,"row","text-start","text-danger","pointer",3,"click"],[1,"bi","bi-trash","w-auto"],["class","col p-2 flex-grow-0",4,"ngFor","ngForOf"],[1,"col","p-2","flex-grow-0"],[1,"bi","bi-person-fill","w-auto"],[3,"rate","max","readonly","rateChange"],[1,"ph-item","p-0",2,"width","200px","height","200px"],[1,"ph-col-12","p-0"],[1,"ph-picture",2,"width","200px","height","200px"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ge,4,2,"ng-container",1),e.YNc(2,ue,3,2,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(4,fe,2,1,"ng-template",null,3,e.W1O),e.YNc(6,he,12,1,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.isMyGallery)("ngIfElse",o)}},dependencies:[m.sg,m.O5,p.OC,m.uU]}),n})();var Z=c(8423);function ve(n,r){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",14),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.image.image,e.LSH)}}const Ze=[{path:"",component:R,children:[{path:"",component:I},{path:"gallery",component:A},{path:"my-gallery",component:A,canActivate:[v]},{path:"generate",component:(()=>{class n{constructor(t,i){this.imageService=t,this.spinner=i,this.generateImage={name:"",prompt:""},this.generating=!0}ngOnInit(){this.generateImage={name:"",prompt:""}}generate(){var t=this;return(0,d.Z)(function*(){yield t.spinner.show();try{t.image=yield t.imageService.generateImage(t.generateImage)}catch{yield t.spinner.hide()}yield t.spinner.hide()})()}generateName(){var t=this;return(0,d.Z)(function*(){const i=yield t.imageService.generateName();t.generateImage.name=i})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h),e.Y36(Z.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-generate-image"]],decls:21,vars:5,consts:[[1,"container","mt-5","pb-5","text-center"],[1,"pt-2"],[1,"text-start","mb-2"],["for","name",1,"form-label"],[1,"input-group","mb-2"],["placeholder","Image name","type","text","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"click"],["for","prompt",1,"form-label"],["id","prompt","placeholder","Description of image what you want generate.","name","prompt",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"disabled","click"],[1,"image","w-100","position-relative","mt-3"],[4,"ngIf"],["size","default","type","ball-spin-clockwise",3,"fullScreen"],[1,"text-white","pt-4"],[3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Generate image"),e.qZA(),e.TgZ(3,"form",2)(4,"label",3),e._uU(5,"Image name"),e.qZA(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("ngModelChange",function(a){return i.generateImage.name=a}),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.generateName()}),e._uU(9,"Generate random name"),e.qZA()(),e.TgZ(10,"label",7),e._uU(11,"Prompt"),e.qZA(),e.TgZ(12,"textarea",8),e.NdJ("ngModelChange",function(a){return i.generateImage.prompt=a}),e.qZA()(),e.TgZ(13,"button",9),e.NdJ("click",function(){return i.generate()}),e._uU(14,"Generate Image"),e.qZA(),e._UZ(15,"hr"),e.TgZ(16,"div",10),e.YNc(17,ve,2,1,"div",11),e.TgZ(18,"ngx-spinner",12)(19,"p",13),e._uU(20," Generating image... "),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("ngModel",i.generateImage.name),e.xp6(5),e.Q6J("ngModel",i.generateImage.prompt),e.xp6(1),e.Q6J("disabled",""===i.generateImage.name||""==i.generateImage.prompt),e.xp6(4),e.Q6J("ngIf",i.image),e.xp6(1),e.Q6J("fullScreen",!1))},dependencies:[m.O5,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,Z.Ro],styles:[".image[_ngcontent-%COMP%]{height:512px}"]}),n})(),canActivate:[v]},{path:"profile",component:le,canActivate:[v]}]}];let xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ze),g.Bz]}),n})();var be=c(3514);let ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,xe,p.IJ,be.AuthModule,l.u5,C.QM,Z.ef]}),n})()}}]);